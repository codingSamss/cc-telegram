# CLITG Configuration
#
# Telegram bot for remote CLI coding agent access with:
# - Dual engines: Claude (default) + Codex (optional)
# - Session management and directory isolation
# - File / image handling
# - Audit logging and approval workflow

# === REQUIRED SETTINGS ===
# Telegram Bot Token from @BotFather
TELEGRAM_BOT_TOKEN=your_bot_token_here

# Bot username (without @)
TELEGRAM_BOT_USERNAME=your_bot_username

# Base directory for project access (absolute path)
APPROVED_DIRECTORY=/path/to/your/projects

# === SECURITY SETTINGS ===
# Comma-separated list of allowed Telegram user IDs (required)
# If empty, bot startup will fail closed.
ALLOWED_USERS=123456789,987654321

# === CLAUDE SETTINGS ===
# Integration method: Use Python SDK (true) or CLI subprocess (false)
USE_SDK=true

# Enable SDK tool permission gate (requires SDK client mode)
# Keep false unless you explicitly need Telegram-side per-tool approval buttons.
SDK_ENABLE_TOOL_PERMISSION_GATE=false

# Anthropic API key for SDK integration (optional if using Claude CLI auth)
ANTHROPIC_API_KEY=

# Path to Claude CLI executable (optional; fallback from PATH)
CLAUDE_CLI_PATH=

# Deprecated compatibility alias (generally keep empty)
CLAUDE_BINARY_PATH=

# Claude setting sources (recommended): user,project,local
# If your gateway/provider rejects explicit setting sources, set this to empty.
CLAUDE_SETTING_SOURCES=user,project,local

# Claude model configuration
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TURNS=10
CLAUDE_TIMEOUT_SECONDS=300

# Allowed / disallowed Claude tools (comma-separated)
# Keep allowed tools empty to inherit local Claude CLI/runtime defaults.
CLAUDE_ALLOWED_TOOLS=
CLAUDE_DISALLOWED_TOOLS=git commit,git push

# === CODEX SETTINGS ===
# Enable Codex CLI adapter (Claude remains default engine)
ENABLE_CODEX_CLI=false

# Path to Codex CLI executable (optional; fallback from PATH)
CODEX_CLI_PATH=

# Enable MCP servers for Codex CLI.
# Keep true by default to match local Codex CLI behavior.
CODEX_ENABLE_MCP=true

# === SESSION & RUNTIME ===
# Session timeout controls
SESSION_TIMEOUT_HOURS=24
SESSION_TIMEOUT_MINUTES=120
MAX_SESSIONS_PER_USER=5

# /resume desktop session scan cache TTL (seconds)
RESUME_SCAN_CACHE_TTL_SECONDS=30

# Number of recent messages shown after /resume
RESUME_HISTORY_PREVIEW_COUNT=6

# Stream rendering cadence (milliseconds)
STREAM_RENDER_DEBOUNCE_MS=1000
STREAM_RENDER_MIN_EDIT_INTERVAL_MS=1000

# Multi-stage status reactions for text requests
STATUS_REACTIONS_ENABLED=true
STATUS_REACTION_DEBOUNCE_MS=700
STATUS_REACTION_STALL_SOFT_MS=10000
STATUS_REACTION_STALL_HARD_MS=30000

# /status precise context probe cache TTL / timeout (seconds)
STATUS_CONTEXT_PROBE_TTL_SECONDS=0
STATUS_CONTEXT_PROBE_TIMEOUT_SECONDS=45

# Cleanup max age for uploaded images (hours)
IMAGE_CLEANUP_MAX_AGE_HOURS=24

# === STORAGE ===
# Database URL (SQLite by default)
DATABASE_URL=sqlite:///data/bot.db

# === FEATURE FLAGS ===
# Enable app-side MCP injection via MCP_CONFIG_PATH.
# Not required for loading user/project MCP from Claude settings files.
ENABLE_MCP=false
MCP_CONFIG_PATH=
ENABLE_GIT_INTEGRATION=true
ENABLE_FILE_UPLOADS=true
ENABLE_QUICK_ACTIONS=false

# === MONITORING ===
LOG_LEVEL=INFO
ENABLE_TELEMETRY=false
SENTRY_DSN=

# === DEVELOPMENT ===
# Environment: development | testing | production
ENVIRONMENT=development
DEBUG=false
DEVELOPMENT_MODE=true

# === WEBHOOK (OPTIONAL) ===
# Leave WEBHOOK_URL empty to use long polling mode.
WEBHOOK_URL=
WEBHOOK_PORT=8443
WEBHOOK_PATH=/webhook
